<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Clase Pel√≠cula ‚Äî Versi√≥n completa con if</title>
  </head>
  <body>
    <pre id="salida"></pre>
    <script>
      //Creamos una clase llamada Pelicula que modelar√° los datos de una pel√≠cula
      class Pelicula {
        //M√©todo est√°tico -> se puede usar sin crear una pel√≠cula
        static generosAceptados() {
          return [
            "Action",
            "Adult",
            "Adventure",
            "Animation",
            "Biography",
            "Comedy",
            "Crime",
            "Documentary",
            "Drama",
            "Family",
            "Fantasy",
            "Film Noir",
            "Game-Show",
            "History",
            "Horror",
            "Musical",
            "Music",
            "Mystery",
            "News",
            "Reality-TV",
            "Romance",
            "Sci-Fi",
            "Short",
            "Sport",
            "Talk-Show",
            "Thriller",
            "War",
            "Western",
          ];
        }

        //El constructor se ejecuta al crear una nueva pel√≠cula con "new Pelicula(...)"
        constructor({
          id,
          titulo,
          director,
          anioEstreno,
          paises,
          generos,
          calificacion,
        }) {
          //Asignamos los valores a las propiedades del objeto
          this.id = id;
          this.titulo = titulo;
          this.director = director;
          this.anioEstreno = anioEstreno;
          this.paises = paises;
          this.generos = generos;
          this.calificacion = calificacion;

          //--- VALIDACIONES CON IF ---

          //1Ô∏è‚É£ Validar ID ‚Üí 9 caracteres (2 letras + 7 n√∫meros)
          const patronID = /^[A-Za-z]{2}\d{7}$/;
          if (!patronID.test(this.id)) {
            console.log(
              "‚ö†Ô∏è ID incorrecto. Debe tener 2 letras y 7 n√∫meros. Ejemplo: AB1234567"
            );
          } else {
            console.log("‚úÖ ID correcto:", this.id);
          }

          //2Ô∏è‚É£ Validar t√≠tulo ‚Üí m√°ximo 100 caracteres
          if (typeof this.titulo !== "string") {
            console.log("‚ö†Ô∏è El t√≠tulo debe ser una cadena de texto.");
          } else if (this.titulo.length === 0) {
            console.log("‚ö†Ô∏è El t√≠tulo no puede estar vac√≠o.");
          } else if (this.titulo.length > 100) {
            console.log("‚ö†Ô∏è El t√≠tulo no debe superar los 100 caracteres.");
          } else {
            console.log("‚úÖ T√≠tulo correcto:", this.titulo);
          }

          //3Ô∏è‚É£ Validar a√±o ‚Üí n√∫mero de 4 d√≠gitos
          if (
            !Number.isInteger(this.anioEstreno) ||
            this.anioEstreno.toString().length !== 4
          ) {
            console.log("‚ö†Ô∏è El a√±o de estreno debe tener 4 d√≠gitos.");
          } else {
            console.log("‚úÖ A√±o correcto:", this.anioEstreno);
          }

          //4Ô∏è‚É£ Validar pa√≠ses ‚Üí debe ser array
          if (!Array.isArray(this.paises)) {
            console.log(
              "‚ö†Ô∏è Los pa√≠ses deben estar dentro de un array. Ejemplo: ['Espa√±a', 'M√©xico']"
            );
          } else {
            console.log("‚úÖ Pa√≠ses correctos:", this.paises.join(", "));
          }

          //5Ô∏è‚É£ Validar g√©neros ‚Üí debe ser array y dentro de los aceptados
          if (!Array.isArray(this.generos)) {
            console.log("‚ö†Ô∏è Los g√©neros deben estar dentro de un array.");
          } else {
            const generosValidos = Pelicula.generosAceptados();
            let generosIncorrectos = this.generos.filter(
              (g) => !generosValidos.includes(g)
            );
            if (generosIncorrectos.length > 0) {
              console.log(
                "‚ö†Ô∏è G√©neros no v√°lidos:",
                generosIncorrectos.join(", ")
              );
              console.log("üìã G√©neros aceptados:", generosValidos.join(", "));
            } else {
              console.log("‚úÖ G√©neros correctos:", this.generos.join(", "));
            }
          }

          //6Ô∏è‚É£ Validar calificaci√≥n ‚Üí n√∫mero de 0 a 10
          if (
            typeof this.calificacion !== "number" ||
            this.calificacion < 0 ||
            this.calificacion > 10
          ) {
            console.log("‚ö†Ô∏è La calificaci√≥n debe ser un n√∫mero entre 0 y 10.");
          } else {
            console.log("‚úÖ Calificaci√≥n correcta:", this.calificacion);
          }
        }

        //M√©todo que devuelve toda la ficha t√©cnica de la pel√≠cula
        fichaTecnica() {
          return (
            `T√çTULO: ${this.titulo}\n` +
            `ID: ${this.id}\n` +
            `DIRECTOR: ${this.director}\n` +
            `A√ëO: ${this.anioEstreno}\n` +
            `PA√çSES: ${this.paises.join(", ")}\n` +
            `G√âNEROS: ${this.generos.join(", ")}\n` +
            `CALIFICACI√ìN: ${this.calificacion}\n`
          );
        }
      }

      //Array con los datos de tres pel√≠culas
      const datosPeliculas = [
        {
          id: "AB1234567",
          titulo: "Interstellar",
          director: "Christopher Nolan",
          anioEstreno: 2014,
          paises: ["USA", "UK"],
          generos: ["Sci-Fi", "Adventure", "Drama"],
          calificacion: 9,
        },
        {
          id: "CD7654321",
          titulo: "The Godfather",
          director: "Francis Ford Coppola",
          anioEstreno: 1972,
          paises: ["USA"],
          generos: ["Crime", "Drama"],
          calificacion: 9.2,
        },
        {
          id: "EF0000000",
          titulo: "Inception",
          director: "Christopher Nolan",
          anioEstreno: 2010,
          paises: ["USA"],
          generos: ["Action", "Sci-Fi", "Thriller"],
          calificacion: 8.8,
        },
      ];

      //Creamos las instancias autom√°ticamente y mostramos su ficha t√©cnica
      const salida = document.getElementById("salida");
      for (let datos of datosPeliculas) {
        const peli = new Pelicula(datos);
        salida.textContent += peli.fichaTecnica() + "\n";
      }
    </script>
  </body>
</html>
